# COC 7版电子角色卡

## 项目概述
本电子角色卡专为《克苏鲁的呼唤》第7版规则设计，提供数字化的角色管理解决方案。支持多页面数据管理、实时计算、本地存储及打印导出功能。

## 主要功能

### 核心功能
- 角色属性管理（力量、体质、体型、敏捷等八项基本属性）
- 动态技能系统（含子技能选择与自动计算）
- 武器装备管理（名称、伤害值、特性）
- 道具管理系统（80个存储位）
- 笔记系统（双栏布局，支持六种预设分类）
- 头像上传功能
- 状态追踪系统（生命值、魔法值、理智值）

### 数据计算
- 自动计算伤害加值与体格
- 职业点数与兴趣点数实时统计与显示
- 技能成功/困难/极难等级自动计算
- 基于属性的衍生值计算（HP、MP、幸运等）
- 闪避等基础技能自动关联相应属性

### 数据管理
- 本地缓存自动保存
- JSON格式导入/导出（不含头像数据）
- 多页面数据同步
- 一键数据重置
- 伙伴模式支持（NPC角色卡）

### 输出功能
- 选择性打印（支持多页面组合）
- 打印优化布局（A4适配）
- 智能内容截断（打印模式）

## 使用指南

### 基本操作
1. **填写基础信息**  
   在"主页面"填写调查员基本信息、属性和技能
2. **管理装备武器**  
   在主页面记录武器信息（名称、伤害、特性）
3. **管理道具**  
   在"道具"页记录携带物品（最多80项）
4. **自定义技能**  
   在"自定义技能"页添加个性化学识
5. **记录笔记**  
   在"笔记"页进行分类知识管理（支持冒险、人物、功法等预设分类）

### 数据操作
- **自动保存**：数据实时保存至浏览器本地存储
- **手动保存**：点击悬浮按钮强制保存
- **导入/导出**：
  1. 点击导出按钮打开菜单
  2. 选择"导出数据"生成JSON文件
  3. 通过"导入数据"恢复角色
- **数据重置**：一键清除当前角色数据

### 打印指南
1. 点击打印按钮
2. 选择要打印的页面：
   - 主页面：基础属性与技能
   - 自定义技能：扩展技能列表
   - 道具：装备与物品清单
   - 笔记：调查记录与知识
3. 确认打印设置：
   - 纸张尺寸：A4
   - 页边距：默认（建议≥0.5cm）
   - 缩放：100%

## 技术实现

### 核心架构
| 组件        | 技术方案                  |
|------------|-------------------------|
| 数据存储    | localStorage + JSON序列化 |
| UI框架     | 纯CSS Grid/Flex布局       |
| 打印系统    | CSS媒体查询 + DOM切换     |

### 关键特性
- **实时计算引擎**：
  - 自动计算伤害加值/体格
  - 理智值(SAN)动态关联克苏鲁神话技能
  - 职业/兴趣点数实时统计

- **打印优化**：
  - 隐藏交互元素
  - 固定行高(22px)
  - 智能省略长文本
  - 背景色保留（CSS打印媒体）

- **错误处理**：
  - 数据完整性验证
  - 非法字符过滤
  - 空值容错处理

## 开发说明

### 依赖项
- 现代浏览器（推荐Chrome 90+）

### 数据结构
```javascript
{
  "basic": { /* 基础信息 */ },
  "attributes": { /* 角色属性 */ },
  "skills": { /* 技能配置 */ },
  "customSkills": [ /* 自定义技能 */ ],
  "items": [ /* 道具列表 */ ],
  "notes": [ /* 笔记条目 */ ],
  "version": "1.2.0"
}
```

### 注意事项
1. 打印样式通过`@media print`实现
2. 头像使用Base64编码存储
3. 输入验证限制：
   - 数字字段仅接受0-999整数
   - 文本字段最大长度255字符

## 版权声明
© 2024 大胡子跑团  
设计：龙王 jumper.rong@outlook.com  
许可协议：CC BY-NC-SA 4.0

本作品与混沌元素(Chaosium)官方无关联，仅供爱好者交流使用  